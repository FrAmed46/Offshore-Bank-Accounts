OBA_scale_factories = {
	 # scaling based on total_offshore_civs
	 
    clear_variable = scaled_high
	clear_variable = scaled_medium
	clear_variable = scaled_low

	set_variable = {
		var = scaled_high
		value = total_offshore_civs
	}
	multiply_variable = {
		var = scaled_high
		value = 0.005
	}

	set_variable = {
		var = scaled_medium
		value = total_offshore_civs
	}
	multiply_variable = {
		var = scaled_medium
		value = 0.0025
	}

	set_variable = {
		var = scaled_low
		value = total_offshore_civs
	}
	multiply_variable = {
		var = scaled_low
		value = 0.001
	}
}

OBA_reset_total_investments = {

	SWI = {
		set_variable = {
			var = total_offshore_civs
			value = 0
		}
		
		force_update_dynamic_modifier = yes
	}
}
	
OBA_remove_investor_all = {
	every_country = {
		clr_country_flag = trade_country
	}
}

OBA_reset_foreign_investments = {
	
	every_country = {
		clear_variable = offshore_civs  ## Originally set it to 0
	}
}

OBA_country_remove_investments = {
	set_temp_variable = {
		var = civs_to_remove
		value = offshore_civs
	}

	add_offsite_building = { type = industrial_complex level = civs_to_remove } ## bye bye civvies

	SWI = {
		subtract_from_variable = {
			var = total_offshore_civs
			value = civs_to_remove
		}
		
		force_update_dynamic_modifier = yes

		clear_variable = offshore_civs
	}
}

test_test_1 = {
	add_offsite_building = { type = industrial_complex level = offshore_civs }
}