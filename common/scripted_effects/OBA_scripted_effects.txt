OBA_scale_factories = {
	 # scaling based on total_offshore_civs
	 
    clear_variable = scaled_high
	clear_variable = scaled_medium
	clear_variable = scaled_low

	set_variable = {
		var = scaled_high
		value = total_offshore_civs
	}
	multiply_variable = {
		var = scaled_high
		value = 0.01
	}

	set_variable = {
		var = scaled_medium
		value = total_offshore_civs
	}
	multiply_variable = {
		var = scaled_medium
		value = 0.005
	}

	set_variable = {
		var = scaled_low
		value = total_offshore_civs
	}
	multiply_variable = {
		var = scaled_low
		value = 0.0025
	}
}

OBA_reset_total_investments = {

	SWI = {
		set_variable = {
			var = total_offshore_civs
			value = 0
		}
		
		force_update_dynamic_modifier = yes
	}
}
	
OBA_remove_investor_all = {
	every_country = {
		clr_country_flag = trade_country
	}
}

OBA_reset_foreign_investments = {
	
	every_country = {
		clear_variable = offshore_civs  ## Originally set it to 0
	}
}

OBA_country_remove_investments = {
	set_temp_variable = { ## var is the number of total civs to remove
		var = civs_to_remove_swiss
		value = offshore_civs
	}

	set_temp_variable = { ## removes all the offmap civs gained by the investor nation
		var = civs_to_delete
		value = offshore_civs
	}

	divide_temp_variable = { ## remove all the offmap civs gained by the investor nation
		var = civs_to_delete
		value = 2
	}

	multiply_temp_variable = { ## remove all the offmap civs gained by the investor nation
		var = civs_to_delete
		value = -1
	}

	add_offsite_building = { type = industrial_complex level = civs_to_delete } ## bye bye civvies

	clear_variable = offshore_civs

	SWI = {
		subtract_from_variable = {
			var = total_offshore_civs
			value = civs_to_remove_swiss
		}
		
		force_update_dynamic_modifier = yes

	}
}

test_test_1 = {
	add_offsite_building = { type = industrial_complex level = offshore_civs }
}