OBA_Swiss_category = {

	Swiss_dynamic_debug = {
		
		visible = {
			is_debug = yes
		}
		
		available = {
			is_debug = yes
		}
		
		cost = 0
		
		complete_effect = {
			add_dynamic_modifier = {
				modifier = swiss_offshore_buff
				force_update_dynamic_modifier = yes
			}
		}
	}
	
	Swiss_recalculate_civs_debug = {
	
		visible = {
			is_debug = yes
		}
	
		available = {
			is_debug = yes
		}
		
		cost = 0
		
		complete_effect = {
			OBA_scale_factories = yes
			force_update_dynamic_modifier = yes
		}
	}
	
	Swiss_same_ideology_investment_only = { ### self explanatory
	
		visible = {
		
			NOT = {
				has_global_flag = OBA_same_ideo_investment
			}
		}	
		
		available = {
			
			NOT = {
				has_global_flag = OBA_same_ideo_investment
			}
		}
		
		cost = 0
		
		complete_effect = {
			set_global_flag = OBA_same_ideo_investment
			custom_effect_tooltip = swiss_same_ideology_investment_only_tt
		}
	}
	
	Swiss_reenable_all_ideology_investment = { ### self explanatory 2
	
		visible = {
			has_global_flag = OBA_same_ideo_investment
		}	
		
		available = {
			has_global_flag = OBA_same_ideo_investment
		}
		
		cost = 0
		
		complete_effect = {
			clr_global_flag = OBA_same_ideo_investment
			custom_effect_tooltip = swiss_reenable_all_ideology_investment_tt
		}
	}
}

OBA_Swiss_demands_category = {
	Swiss_force_trade = {  ### Forces a nation to go up a trade law
		
		visible = {
			always = yes
		}
		available = {
			always = yes
		}
		target_trigger = {
			FROM = {
				check_variable = {
					offshore_civs > 14
				}
			}
		}
		
		days_re_enable = 180
		cost = 75
		complete_effect = {
			custom_effect_tooltip = swiss_force_trade_tt
			FROM = { country_event = OBA_event.1 }
			add_named_threat = {
				threat = 1
				name = OBA_SWI_demanded_trade
			}
		}
		
	}

	Swiss_steal_all_factories = { ### Seizes all foreign civilian factories invested in Switzerland
	
		visible = {
			check_variable = {
				total_offshore_civs > 0
			}
		}
		available = {
			OR = {
				has_government = communism
				has_government = neutrality
				has_government = fascism
			}
		}
		
		cost = total_offshore_civs
		days_re_enable = 360
		days_remove = 5
		complete_effect = {
			custom_effect_tooltip = swiss_seize_all_factories_tt 
			add_named_threat = {
				threat = 10
				name = OBA_SWI_seized_all_factories
			}
			OBA_remove_investor_all
			###add_timed_idea = {
			#	OBA_seized_foreign_factories
			#	days = total_offshore_civs
			#}
			every_country = {
				limit = {
					check_variable = {
					offshore_civs > 0
					}
				}
				add_opinion_modifier = {
					target = SWI
					modifier = OBA_seized_our_factories
				}
				set_country_flag = OBA_stole_civs
				
				country_event = OBA_event.4
				OBA_country_remove_investments = true
			}
		}
		
		remove_effect = {
		custom_effect_tooltip = swiss_seize_factories_done_tt 
			hidden_effect = {
			OBA_reset_total_investments = true
			OBA_reset_foreign_investments = true 
			force_update_dynamic_modifier = yes
			}
		}
	}	

	Swiss_steal_factory = { ### Seizes all foreign civilian factories invested in Switzerland by a certain country
		visible = {
			check_variable = {
				total_offshore_civs > 0
			}
		}
		
		available = {
			OR = {
				has_government = communism
				has_government = neutrality
				has_government = fascism
			}
		}
		
		days_re_enable = 270
		cost = FROM.offshore_civs
		
		target_trigger = {
			FROM = {
				check_variable = {
					offshore_civs > 0
				}
			}
		}
		
		complete_effect = {
			    custom_effect_tooltip = swiss_seize_factory_tt 
				add_opinion_modifier = {
					target = SWI
					modifier = OBA_seized_our_factories
				}
				set_country_flag = OBA_stole_civs
				
				country_event = OBA_event.4
				OBA_country_remove_investments = true
		}
	}

	swiss_demand_more_trade = { 
		visible = {
			always = yes
		}
		available = {
			always = yes
		}
		target_trigger = {
			FROM = {
				check_variable = {
					offshore_civs > 9
				}
			}
		}
		
		days_re_enable = 90
		cost = 50
		complete_effect = {
			custom_effect_tooltip = swiss_demand_more_trade_tt
			FROM = { country_event = OBA_event.5 }
		}
	}
}
